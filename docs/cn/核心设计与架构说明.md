## 1. 核心概念：组

在本软件中，发挥核心作用的是组（Group）这一数据组织形式。

软件的数据结构为三级结构：

- 组
- 单元
- 单元数据

一个最小的组（单元）是一组财务收支记录的集合，等同于一张表格。组是所有单元的汇总。

---
## 2. 组的最小结构——单元

每个单元，相当于一个独立的表格。一个单元（支出单元）的结构与示例数据如下：

| id  | category | subcategory | item   | io  | amount |
| --- | -------- | ----------- | ------ | --- | ------ |
| 1   | 餐饮支出     | 正餐          | 番茄牛肉意面 | O   | 19.00  |
| 2   | 日常支出     | 服务          | 花费充值   | O   | 98.00  |
| 3   | 非常规支出    | 服饰          | 亚麻衬衫   | O   | 168.00 |
- IO 表示 收入/支出：“I”对应收入，”O“对应支出。

---
## 3. 项目文件夹

项目文件夹是储存在 `data` 文件夹中的文件夹，其中储存了项目的基本数据，每次打开程序都需要选择项目文件夹才可以对项目进行操作。

### 3.1 项目文件夹的结构

一个项目文件夹中只有一种文件：

- `[No]_[unit name].csv`：这是一个单元的源数据

注意： CSV 文件（单元源数据）的文件名开头只能是：数字序号+下划线。按照单元合理顺序，数字序号的序列必须是个从 1 开始递增的不间断的整数序列。

### 3.2 读取项目

当你选择一个项目文件夹并读取它，程序会读取每个 CSV 文件，将每个单元都转化为一个 DataFrame，再将所有的单元的 DataFrame 合并成组的 DataFrame。使用 CSV 来储存原始数据是出于兼容性的考虑。

你可以在 `src/core/project_manager.py` 的代码中的 `load_project_by_id()` 函数，观察项目加载具体的实现方式。

---
## 4. 分析方式

由项目中的所有单元组合成为一个组（Group），成为程序中最大的数据结构。

在分析时，有四种分析方式：

1. 单元分析：仅对指定的单元进行计算、分析
2. 单元点对点横向分析：比较分析两个单元
3. 组横向分析：比较分析所有单元
4. 纵向合并分析：对整个组（合并所有单元）进行计算、分析

---
## 5. 分析插件

主程序仅仅负责菜单交互、基础配置和提供 DataFrame 数据，具体的分析完全交由插件处理。

### 5.1 分析插件是什么

如前所述，在这个程序里，分析的策略与具体过程是由分析插件（简称插件）决定的。而插件是存放在插件文件夹 `src/plugins` 中的 `.py` 格式的 Python 代码文件。

### 5.2 分析插件的文件名

在插件文件夹中，你可以看到类似这样的文件名：`[Default] Basic.py`，在中括号内的是插件的种类（category），后面的 `Basic` 则是插件的名字。这只是推荐的命名规范，并不是强制的。

---
## 6. 插件预制

出于种种原因，我只做了一个插件预制（并且没有完全完成），而在原本的计划中至少会做两个或以上的数量。但好消息是，这个插件已经搭建了一个完整的框架——如果想要完善这个基础插件，抑或者编写新的插件，直接在这个插件的基础上修改或添加代码即可。

插件名即 `[Default] Basic.py`，是插件文件夹中唯一的 `.py` 文件。这个插件中，每个单元包括整个月的所有财务收支记录，一个组即表示全年的所有财务收支记录。

原本计划编写的另一个插件，每个单元表示一个大类（比如日常支出、分期支出、理财收支等等）的财务收支，整个组即表示一个月或者一年的财务收支。但如前所述，很遗憾，我没有机会去完成这个插件。

---
## 7. 结语

本项目的目标并非构建一个功能完备的财务系统，而是通过清晰的数据分层（组 / 单元）与插件化分析机制，探索一种可扩展、可替换的分析架构。

尽管从工程成熟度的角度来看，本项目在各方面仍较为初级，但它已经很好地完成了作为业余 Python 开发新手的探索性实验项目这一使命。

当前程序仅覆盖了最基础的使用场景，但核心设计已经完整：数据结构稳定、分析逻辑解耦、插件可自由扩展。后续无论是补全现有插件，还是引入新的分析范式，都可以在不改动主程序的前提下完成。
